schemaVersion: 2.1.0
metadata:
  name: multi-post-start
components:
  - name: tools
    container:
      image: quay.io/devfile/universal-developer-image
commands:
  # Post-start events
  - id: event-one
    exec:
      commandLine: >-
        sh -c 'sleep 5 && \
        date > /home/user/event-one-date.txt && \
        echo "first command at $(/usr/bin/date)" >> /tmp/poststart.log && \
        sleep 5'
      component: tools
      label: ""
      workingDir: "${HOME}"
  - id: event-two
    exec:
      commandLine: >-
        sh -c 'sleep 5 && \
        date > /home/user/event-two-date.txt && \
        echo "second command at $(/usr/bin/date)" >> /tmp/poststart.log && \
        sleep 5'
      component: tools
      label: ""
      workingDir: "${HOME}"
  - id: event-three
    exec:
      commandLine: >-
        sh -c 'sleep 5 && \
        date > /home/user/event-three-date.txt && \
        echo "third command at $(/usr/bin/date)" >> /tmp/poststart.log && \
        sleep 5'
      component: tools
      label: ""
      workingDir: "${HOME}"
events:
  postStart:
    - event-one
    - event-two
    - event-three
